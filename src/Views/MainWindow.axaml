<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:LibraryManagement.ViewModels"
        xmlns:local="clr-namespace:LibraryManagement.Views"
        xmlns:dataGrid="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="700"
        x:Class="LibraryManagement.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¾Ð¹"
        x:CompileBindings="True"
        Width="1400" Height="700"
        WindowStartupLocation="CenterScreen"
        CanResize="False">

    <Design.DataContext>
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid Margin="15" RowDefinitions="Auto,Auto,*,Auto">

        <TextBlock Grid.Row="0"
                   Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¾Ð¹ ÐºÐ½Ð¸Ð³"
                   FontSize="28"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"
                   Margin="0 0 0 20"/>


        <Border Grid.Row="1"
                BorderBrush="#e0e0e0"
                BorderThickness="1"
                CornerRadius="8"
                Padding="20"
                Margin="0 0 0 20">
            <StackPanel>
                <TextBlock Text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¸ Ð¿Ð¾Ð¸ÑÐº"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Margin="0 0 0 15"/>

                <Grid ColumnDefinitions="1*,20,1*,20,1*,20,auto">

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ:"
                                   Margin="0 0 0 5"
                                   FontSize="13"/>
                        <TextBox Text="{Binding SearchText}"
                                 Watermark="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ..."
                                 Height="32"/>
                    </StackPanel>


                    <Rectangle Grid.Column="1" Width="20"/>


                    <StackPanel Grid.Column="2">
                        <TextBlock Text="ÐÐ²Ñ‚Ð¾Ñ€:"
                                   Margin="0 0 0 5"
                                   FontSize="13"/>
                        <ComboBox ItemsSource="{Binding AuthorFilterItems}"
                                  SelectedItem="{Binding SelectedAuthorFilter}"
                                  Height="32"/>
                    </StackPanel>

                    <Rectangle Grid.Column="3" Width="20"/>


                    <StackPanel Grid.Column="4">
                        <TextBlock Text="Ð–Ð°Ð½Ñ€:"
                                   Margin="0 0 0 5"
                                   FontSize="13"/>
                        <ComboBox ItemsSource="{Binding GenreFilterItems}"
                                  SelectedItem="{Binding SelectedGenreFilter}"
                                  Height="32"/>
                    </StackPanel>


                    <Rectangle Grid.Column="5" Width="20"/>


                    <StackPanel Grid.Column="6"
                                VerticalAlignment="Center">
                        <Button Content="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹"
                                Command="{Binding ClearFiltersCommand}"
                                Height="32"
                                Padding="15 0"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>


        <dataGrid:DataGrid Grid.Row="2"
                           ItemsSource="{Binding Books}"
                           SelectedItem="{Binding SelectedBook}"
                           AutoGenerateColumns="False"
                           IsReadOnly="True"
                           Margin="0 0 0 20"
                           BorderBrush="#e0e0e0"
                           BorderThickness="1"
                           CornerRadius="8"
                           Background="White"
                           RowBackground="White"
                         >

            <dataGrid:DataGrid.Columns>
                <dataGrid:DataGridTextColumn Header="ID"
                                             Binding="{Binding Id}"
                                             Width="60"/>

                <dataGrid:DataGridTextColumn Header="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ"
                                             Binding="{Binding Title}"
                                             Width="250"/>

                <dataGrid:DataGridTextColumn Header="ÐÐ²Ñ‚Ð¾Ñ€"
                                             Width="200">
                    <dataGrid:DataGridTextColumn.Binding>
                        <MultiBinding StringFormat="{}{0} {1}">
                            <Binding Path="Author.FirstName"/>
                            <Binding Path="Author.LastName"/>
                        </MultiBinding>
                    </dataGrid:DataGridTextColumn.Binding>
                </dataGrid:DataGridTextColumn>

                <dataGrid:DataGridTextColumn Header="Ð–Ð°Ð½Ñ€"
                                             Binding="{Binding Genre.Name}"
                                             Width="150"/>

                <dataGrid:DataGridTextColumn Header="Ð“Ð¾Ð´"
                                             Binding="{Binding PublishYear}"
                                             Width="80"/>

                <dataGrid:DataGridTextColumn Header="ISBN"
                                             Binding="{Binding ISBN}"
                                             Width="150"/>

                <dataGrid:DataGridTextColumn Header="Ð’ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸"
                                             Binding="{Binding QuantityInStock}"
                                             Width="100"/>
            </dataGrid:DataGrid.Columns>
        </dataGrid:DataGrid>


        <Border Grid.Row="3"
                BorderBrush="#e0e0e0"
                BorderThickness="1"
                CornerRadius="8"
                Padding="15">
            <Grid ColumnDefinitions="*,auto,auto,auto,auto,auto,*">

                <StackPanel Grid.Column="1"
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Spacing="20">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Ð’ÑÐµÐ³Ð¾: "
                                   FontWeight="Bold"
                                   FontSize="14"/>
                        <TextBlock Text="{Binding TotalBooksCount}"
                                   FontSize="14"
                                   Foreground="#2196F3"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ÐŸÐ¾ÐºÐ°Ð·Ð°Ð½Ð¾: "
                                   FontWeight="Bold"
                                   FontSize="14"/>
                        <TextBlock Text="{Binding FilteredBooksCount}"
                                   FontSize="14"
                                   Foreground="#4CAF50"/>
                    </StackPanel>
                </StackPanel>


                <StackPanel Grid.Column="2"
                            Orientation="Horizontal"
                            Spacing="10">

                    <Button Content="ÐÐ²Ñ‚Ð¾Ñ€Ñ‹"
                            Command="{Binding ManageAuthorsCommand}"
                            Padding="20 8"
                            FontSize="13"
                            ToolTip.Tip="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð°Ð¼Ð¸"/>

                    <Button Content="Ð–Ð°Ð½Ñ€Ñ‹"
                            Command="{Binding ManageGenresCommand}"
                            Padding="20 8"
                            FontSize="13"
                            ToolTip.Tip="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¶Ð°Ð½Ñ€Ð°Ð¼Ð¸"/>

                    <Button Content="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"
                            Command="{Binding AddBookCommand}"
                            Classes="primary"
                            Padding="20 8"
                            FontSize="13"/>

                    <Button Content="âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
                            Command="{Binding EditBookCommand}"
                            IsEnabled="{Binding SelectedBook, Converter={x:Static ObjectConverters.IsNotNull}}"
                            Padding="20 8"
                            FontSize="13"/>

                    <Button Content="ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"
                            Command="{Binding DeleteBookCommand}"
                            IsEnabled="{Binding SelectedBook, Converter={x:Static ObjectConverters.IsNotNull}}"
                            Classes="danger"
                            Padding="20 8"
                            FontSize="13"/>
                </StackPanel>

                <Rectangle Grid.Column="6" Width="0"/>
            </Grid>
        </Border>


        <Grid Grid.RowSpan="4"
              Background="#CCFFFFFF"
              IsVisible="{Binding IsLoading}"
              ZIndex="100">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True"
                             Width="300"
                             Height="4"/>
                <TextBlock Text="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…..."
                           Margin="0 15 0 0"
                           HorizontalAlignment="Center"
                           FontSize="14"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>